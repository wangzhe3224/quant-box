<!doctype html><html lang=en><head><meta charset=utf-8><meta name=viewport content="width=device-width,initial-scale=1"><meta name=robots content="noodp"><title>Systematic Trading Done Serverless (3) - Fargate - QuantBox</title><meta name=Description content="(STDS) Part 3 - Compute with Fargate. What is Fargate? Why using Fargate? Compare with Lambda?"><meta property="og:title" content="Systematic Trading Done Serverless (3) - Fargate"><meta property="og:description" content="(STDS) Part 3 - Compute with Fargate. What is Fargate? Why using Fargate? Compare with Lambda?"><meta property="og:type" content="article"><meta property="og:url" content="https://quant.funcoder.net/posts/serverless-3-fargate/"><meta property="og:image" content="https://quant.funcoder.net/posts/serverless-3-fargate/fargate.png"><meta property="article:section" content="posts"><meta property="article:published_time" content="2023-02-07T00:00:00+00:00"><meta property="article:modified_time" content="2023-02-07T12:08:08+00:00"><meta property="og:site_name" content="QuantBox"><meta name=twitter:card content="summary_large_image"><meta name=twitter:image content="https://quant.funcoder.net/posts/serverless-3-fargate/fargate.png"><meta name=twitter:title content="Systematic Trading Done Serverless (3) - Fargate"><meta name=twitter:description content="(STDS) Part 3 - Compute with Fargate. What is Fargate? Why using Fargate? Compare with Lambda?"><meta name=application-name content="Quant Box - 你的量化工具箱"><meta name=apple-mobile-web-app-title content="Quant Box - 你的量化工具箱"><meta name=theme-color content="#ffffff"><meta name=msapplication-TileColor content="#da532c"><link rel="shortcut icon" type=image/x-icon href=/favicon.ico><link rel=icon type=image/png sizes=32x32 href=/favicon-32x32.png><link rel=icon type=image/png sizes=16x16 href=/favicon-16x16.png><link rel=apple-touch-icon sizes=180x180 href=/apple-touch-icon.png><link rel=mask-icon href=/safari-pinned-tab.svg color=#5bbad5><link rel=manifest href=/site.webmanifest><link rel=canonical href=https://quant.funcoder.net/posts/serverless-3-fargate/><link rel=prev href=https://quant.funcoder.net/posts/serverless-2-lambda/><link rel=stylesheet href=/css/style.min.css><link rel=preload href=https://cdn.jsdelivr.net/npm/@fortawesome/fontawesome-free@6.1.1/css/all.min.css as=style onload='this.onload=null,this.rel="stylesheet"'><noscript><link rel=stylesheet href=https://cdn.jsdelivr.net/npm/@fortawesome/fontawesome-free@6.1.1/css/all.min.css></noscript><link rel=preload href=https://cdn.jsdelivr.net/npm/animate.css@4.1.1/animate.min.css as=style onload='this.onload=null,this.rel="stylesheet"'><noscript><link rel=stylesheet href=https://cdn.jsdelivr.net/npm/animate.css@4.1.1/animate.min.css></noscript><script type=application/ld+json>{"@context":"http://schema.org","@type":"BlogPosting","headline":"Systematic Trading Done Serverless (3) - Fargate","inLanguage":"en","mainEntityOfPage":{"@type":"WebPage","@id":"https:\/\/quant.funcoder.net\/posts\/serverless-3-fargate\/"},"image":[{"@type":"ImageObject","url":"https:\/\/quant.funcoder.net\/posts\/serverless-3-fargate\/fargate.png","width":761,"height":331}],"genre":"posts","keywords":"serverless, aws, fargate, building-block","wordcount":646,"url":"https:\/\/quant.funcoder.net\/posts\/serverless-3-fargate\/","datePublished":"2023-02-07T00:00:00+00:00","dateModified":"2023-02-07T12:08:08+00:00","publisher":{"@type":"Organization","name":"QuantBox","logo":{"@type":"ImageObject","url":"https:\/\/quant.funcoder.net\/images\/logo.png","width":1022,"height":984}},"author":{"@type":"Person","name":"FunCoder"},"description":"(STDS) Part 3 - Compute with Fargate. What is Fargate? Why using Fargate? Compare with Lambda?"}</script><script async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js?client=ca-pub-9801985319378542" crossorigin=anonymous></script></head><body data-header-desktop=fixed data-header-mobile=auto><script type=text/javascript>(window.localStorage&&localStorage.getItem("theme")?localStorage.getItem("theme")==="dark":"auto"==="auto"?window.matchMedia("(prefers-color-scheme: dark)").matches:"auto"==="dark")&&document.body.setAttribute("theme","dark")</script><div id=mask></div><div class=wrapper><header class=desktop id=header-desktop><div class=header-wrapper><div class=header-title><a href=/ title=QuantBox>QuantBox</a></div><div class=menu><div class=menu-inner><a class=menu-item href=/posts/>Posts </a><a class=menu-item href=/tags/>Tags </a><a class=menu-item href=/categories/>Categories </a><a class=menu-item href=https://github.com/wangzhe3224/quant-box title=GitHub rel="noopener noreffer" target=_blank><i class='fab fa-github fa-fw' aria-hidden=true></i> </a><span class="menu-item delimiter"></span><span class="menu-item search" id=search-desktop>
<input type=text placeholder="Search titles or contents..." id=search-input-desktop>
<a href=javascript:void(0); class="search-button search-toggle" id=search-toggle-desktop title=Search><i class="fas fa-search fa-fw" aria-hidden=true></i></a>
<a href=javascript:void(0); class="search-button search-clear" id=search-clear-desktop title=Clear><i class="fas fa-times-circle fa-fw" aria-hidden=true></i></a>
<span class="search-button search-loading" id=search-loading-desktop><i class="fas fa-spinner fa-fw fa-spin" aria-hidden=true></i></span>
</span><a href=javascript:void(0); class="menu-item theme-switch" title="Switch Theme"><i class="fas fa-adjust fa-fw" aria-hidden=true></i>
</a><a href=javascript:void(0); class="menu-item language" title="Select Language"><i class="fa fa-globe" aria-hidden=true></i>
<select class=language-select id=language-select-desktop onchange="location=this.value"><option value=/posts/serverless-3-fargate/ selected>English</option></select></a></div></div></div></header><header class=mobile id=header-mobile><div class=header-container><div class=header-wrapper><div class=header-title><a href=/ title=QuantBox>QuantBox</a></div><div class=menu-toggle id=menu-toggle-mobile><span></span><span></span><span></span></div></div><div class=menu id=menu-mobile><div class=search-wrapper><div class="search mobile" id=search-mobile><input type=text placeholder="Search titles or contents..." id=search-input-mobile>
<a href=javascript:void(0); class="search-button search-toggle" id=search-toggle-mobile title=Search><i class="fas fa-search fa-fw" aria-hidden=true></i></a>
<a href=javascript:void(0); class="search-button search-clear" id=search-clear-mobile title=Clear><i class="fas fa-times-circle fa-fw" aria-hidden=true></i></a>
<span class="search-button search-loading" id=search-loading-mobile><i class="fas fa-spinner fa-fw fa-spin" aria-hidden=true></i></span></div><a href=javascript:void(0); class=search-cancel id=search-cancel-mobile>Cancel</a></div><a class=menu-item href=/posts/ title>Posts</a><a class=menu-item href=/tags/ title>Tags</a><a class=menu-item href=/categories/ title>Categories</a><a class=menu-item href=https://github.com/wangzhe3224/quant-box title=GitHub rel="noopener noreffer" target=_blank><i class='fab fa-github fa-fw' aria-hidden=true></i></a><a href=javascript:void(0); class="menu-item theme-switch" title="Switch Theme">
<i class="fas fa-adjust fa-fw" aria-hidden=true></i>
</a><a href=javascript:void(0); class=menu-item title="Select Language"><i class="fa fa-globe fa-fw" aria-hidden=true></i>
<select class=language-select onchange="location=this.value"><option value=/posts/serverless-3-fargate/ selected>English</option></select></a></div></div></header><div class="search-dropdown desktop"><div id=search-dropdown-desktop></div></div><div class="search-dropdown mobile"><div id=search-dropdown-mobile></div></div><main class=main><div class=container><div class=toc id=toc-auto><h2 class=toc-title>Contents</h2><div class=toc-content id=toc-content-auto></div></div><article class="page single"><h1 class="single-title animate__animated animate__flipInX">Systematic Trading Done Serverless (3) - Fargate</h1><div class=post-meta><div class=post-meta-line><span class=post-author><a href=https://github.com/wangzhe3224 title=Author target=_blank rel="noopener noreffer author" class=author><i class="fas fa-user-circle fa-fw" aria-hidden=true></i>FunCoder</a></span>&nbsp;<span class=post-category>included in <a href=/categories/software-design/><i class="far fa-folder fa-fw" aria-hidden=true></i>Software Design</a></span></div><div class=post-meta-line><i class="far fa-calendar-alt fa-fw" aria-hidden=true></i>&nbsp;<time datetime=2023-02-07>2023-02-07</time>&nbsp;<i class="fas fa-pencil-alt fa-fw" aria-hidden=true></i>&nbsp;646 words&nbsp;
<i class="far fa-clock fa-fw" aria-hidden=true></i>&nbsp;4 minutes&nbsp;</div></div><div class=featured-image><img class=lazyload src=/svg/loading.min.svg data-src=/posts/serverless-3-fargate/fargate.png data-srcset="/posts/serverless-3-fargate/fargate.png, /posts/serverless-3-fargate/fargate.png 1.5x, /posts/serverless-3-fargate/fargate.png 2x" data-sizes=auto alt=/posts/serverless-3-fargate/fargate.png title="(STDS) Part 3 - Compute with Fargate. What is Fargate? Why using Fargate? Compare with Lambda?"></div><div class="details toc" id=toc-static data-kept><div class="details-summary toc-title"><span>Contents</span>
<span><i class="details-icon fas fa-angle-right" aria-hidden=true></i></span></div><div class="details-content toc-content" id=toc-content-static><nav id=TableOfContents><ul><li><a href=#what-is-fargate>What is <code>Fargate</code></a></li><li><a href=#lambda-vs-fargate><code>Lambda</code> vs <code>Fargate</code></a><ul><li><a href=#start-time>Start Time</a></li><li><a href=#computation-power>Computation Power</a></li><li><a href=#duration>Duration</a></li><li><a href=#operation-and-scaling>Operation and Scaling</a></li></ul></li><li><a href=#when-to-choose-fargate>When to choose <code>Fargate</code></a></li><li><a href=#final-thought>Final Thought</a></li><li><a href=#references>References</a></li></ul></nav></div></div><div class=content id=content><h2 id=what-is-fargate>What is <code>Fargate</code></h2><p>AWS <code>fargate</code> is serverless compute for containers. In concept, <code>fargate</code>
provide a service that user only need to provide a image containing business
logic, and AWS will handle the container management.</p><p>If we put the other serverless computation engine <code>lambda</code> with <code>fargate</code><sup id=fnref:1><a href=#fn:1 class=footnote-ref role=doc-noteref>1</a></sup>:</p><p><figure><a class=lightgallery href=https://raw.githubusercontent.com/wangzhe3224/pic_repo/master/images/20230206211222.png title=20230206211222 data-thumbnail=https://raw.githubusercontent.com/wangzhe3224/pic_repo/master/images/20230206211222.png data-sub-html="<h2>EC2 vs Lambda vs Fargate</h2><p>20230206211222</p>"><img class=lazyload src=/svg/loading.min.svg data-src=https://raw.githubusercontent.com/wangzhe3224/pic_repo/master/images/20230206211222.png data-srcset="https://raw.githubusercontent.com/wangzhe3224/pic_repo/master/images/20230206211222.png, https://raw.githubusercontent.com/wangzhe3224/pic_repo/master/images/20230206211222.png 1.5x, https://raw.githubusercontent.com/wangzhe3224/pic_repo/master/images/20230206211222.png 2x" data-sizes=auto alt=https://raw.githubusercontent.com/wangzhe3224/pic_repo/master/images/20230206211222.png></a><figcaption class=image-caption>EC2 vs Lambda vs Fargate</figcaption></figure></p><p>We can see that <code>fargate</code> is just between a server solution (ec2) and <code>lambda</code>
in terms of flexibility and operation burden.</p><p>As this series is about serverless let&rsquo;s compare lambda and fargate, which are
the only computation engine in our serverless toolbox. (This is not to say we
cannot use server based services in a serverless architecture, in fact, once we
follow serverless design patterns ie micro-service and event based, it is very
easy to plug any server based services.)</p><h2 id=lambda-vs-fargate><code>Lambda</code> vs <code>Fargate</code></h2><h3 id=start-time>Start Time</h3><p>Lambda job starts much faster than Fargate tasks. In lambda even the slow cold
start is counting in milliseconds, whereas with Fargate, we are talking about
minutes.</p><p>The long start time makes fargate more suitable for long lasting sessions so
that the cost of startup is meaningful, whereas lambda is for those jobs short
lived.</p><h3 id=computation-power>Computation Power</h3><p>In terms of computation power, fargate is much more powerful than lambda (with
trade off the start time).</p><p><figure><a class=lightgallery href=https://raw.githubusercontent.com/wangzhe3224/pic_repo/master/images/20230206234224.png title=20230206234224 data-thumbnail=https://raw.githubusercontent.com/wangzhe3224/pic_repo/master/images/20230206234224.png data-sub-html="<h2>Fargate Configs</h2><p>20230206234224</p>"><img class=lazyload src=/svg/loading.min.svg data-src=https://raw.githubusercontent.com/wangzhe3224/pic_repo/master/images/20230206234224.png data-srcset="https://raw.githubusercontent.com/wangzhe3224/pic_repo/master/images/20230206234224.png, https://raw.githubusercontent.com/wangzhe3224/pic_repo/master/images/20230206234224.png 1.5x, https://raw.githubusercontent.com/wangzhe3224/pic_repo/master/images/20230206234224.png 2x" data-sizes=auto alt=https://raw.githubusercontent.com/wangzhe3224/pic_repo/master/images/20230206234224.png></a><figcaption class=image-caption>Fargate Configs</figcaption></figure></p><p>With fargate, you can get a container with 16 vCores and 120 GB memory to run
your image, whereas in lambda the memory is capped with 10 GB (as of 2023, aws
seems increasing the limit during the past years). And in lambda the CPU is
allocated proportion to memory sizing with the cap of 6 vCores.</p><p>In systematic trading land, there are definitely some tasks that requires a
beefy container to run.</p><h3 id=duration>Duration</h3><p>Fargate jobs can run forever just like a normal server, whereas lambda has a
duration cap at 15 min.</p><p>Haven said that, if you have a task that need to run 24<em>7, probably <code>EC2</code> is
what you need, because running same size fargate container 24</em>7 is more
expensive that a same size EC2 box.</p><p>In systematic trading land, if you have some latency sensitive task that need a
much longer session, say during US market open hours, fargate is the best
choice.</p><h3 id=operation-and-scaling>Operation and Scaling</h3><p>Fargate is more involved in terms of operation, for example, the auto-scaling of
fargate is not as straightforward as lambda. With lambda there is very little
operation to do and auto scaling is really, say, auto.</p><p>On the other side of the coin, more operation means more control. Fargate
proviode more control to the runtime.</p><h2 id=when-to-choose-fargate>When to choose <code>Fargate</code></h2><p>Choose <code>Fargate</code>:</p><ul><li>you want to migrate your docker container service to serverless</li><li>any job you want to run more than 15 min</li><li>long session jobs</li><li>low latency jobs</li><li>computation intensive jobs, for example requirement more than 10 GB memory</li></ul><p>Choose <code>Lambda</code>:</p><ul><li>short session jobs</li><li>latency is not a big deal</li><li>computation less intensive</li></ul><p>Although before deicide lambda and fargate, it is always better to think about
the structure of the task.</p><p>Can we simply break down a big task that need big fargate container to several
lambda functions? From my experience, in some cases use <code>Step Function</code> with
lambda can simple break down the big fargate jobs.</p><p>We also need to think about the cost. The worst thing we can do is that we use
fargate and it turns out it is more expensive than a EC2 solution.</p><h2 id=final-thought>Final Thought</h2><p>Comparing to <code>Lambda</code>, <code>Fargate</code> is more like traditional server host solution.
It does not affect design architecture as much as lambda does.</p><p>However, we should never stick to a toolbox and ignore all other tools, in the end
our target is to build a software, trading system in our case, we should use
more tooling to help us as long as it fit in the system.</p><h2 id=references>References</h2><ul><li><a href="https://www.youtube.com/watch?v=wrZvlJlcZio&t=66s" target=_blank rel="noopener noreffer">Introducing AWS Fargate - AWS Online Tech
Talks</a></li></ul><div class=footnotes role=doc-endnotes><hr><ol><li id=fn:1><p><a href=https://medium.com/thundra/getting-it-right-between-ec2-fargate-and-lambda-bb42220b8c79 target=_blank rel="noopener noreffer">https://medium.com/thundra/getting-it-right-between-ec2-fargate-and-lambda-bb42220b8c79</a>&#160;<a href=#fnref:1 class=footnote-backref role=doc-backlink>&#8617;&#xfe0e;</a></p></li></ol></div></div><div class=post-footer id=post-footer><div class=post-info><div class=post-info-line><div class=post-info-mod><span>Updated on 2023-02-07&nbsp;<a class=git-hash href=https://github.com/wangzhe3224/quant-box/commit/b184079c0b6e960f6e9082391cc6625013ec1d5e target=_blank title="commit by Zhe Wang(wangzhetju@gmail.com) b184079c0b6e960f6e9082391cc6625013ec1d5e: severless - 3 fargater">
<i class="fas fa-hashtag fa-fw" aria-hidden=true></i>b184079</a></span></div></div><div class=post-info-line><div class=post-info-md></div><div class=post-info-share><span><a href=javascript:void(0); title="Share on Twitter" data-sharer=twitter data-url=https://quant.funcoder.net/posts/serverless-3-fargate/ data-title="Systematic Trading Done Serverless (3) - Fargate" data-hashtags=serverless,aws,fargate,building-block><i class="fab fa-twitter fa-fw" aria-hidden=true></i></a><a href=javascript:void(0); title="Share on Facebook" data-sharer=facebook data-url=https://quant.funcoder.net/posts/serverless-3-fargate/ data-hashtag=serverless><i class="fab fa-facebook-square fa-fw" aria-hidden=true></i></a><a href=javascript:void(0); title="Share on Linkedin" data-sharer=linkedin data-url=https://quant.funcoder.net/posts/serverless-3-fargate/><i class="fab fa-linkedin fa-fw" aria-hidden=true></i></a><a href=javascript:void(0); title="Share on WhatsApp" data-sharer=whatsapp data-url=https://quant.funcoder.net/posts/serverless-3-fargate/ data-title="Systematic Trading Done Serverless (3) - Fargate" data-web><i class="fab fa-whatsapp fa-fw" aria-hidden=true></i></a><a href=javascript:void(0); title="Share on Hacker News" data-sharer=hackernews data-url=https://quant.funcoder.net/posts/serverless-3-fargate/ data-title="Systematic Trading Done Serverless (3) - Fargate"><i class="fab fa-hacker-news fa-fw" aria-hidden=true></i></a></span></div></div></div><div class=post-info-more><section class=post-tags><i class="fas fa-tags fa-fw" aria-hidden=true></i>&nbsp;<a href=/tags/serverless/>serverless</a>,&nbsp;<a href=/tags/aws/>aws</a>,&nbsp;<a href=/tags/fargate/>fargate</a>,&nbsp;<a href=/tags/building-block/>building-block</a></section><section><span><a href=javascript:void(0); onclick=window.history.back()>Back</a></span>&nbsp;|&nbsp;<span><a href=/>Home</a></span></section></div><div class=post-nav><a href=/posts/serverless-2-lambda/ class=prev rel=prev title="Systematic Trading Done Serverless (2) - Lambda"><i class="fas fa-angle-left fa-fw" aria-hidden=true></i>Systematic Trading Done Serverless (2) - Lambda</a></div></div><div id=comments><div id=disqus_thread class=comment></div><noscript>Please enable JavaScript to view the comments powered by <a href=https://disqus.com/?ref_noscript>Disqus</a>.</noscript></div></article></div></main><footer class=footer><div class=footer-container><div class=footer-line><a href=https://github.com/sponsors/wangzhe3224>>> Sponsor Me <<</a></div><div class=footer-line itemscope itemtype=http://schema.org/CreativeWork><i class="far fa-copyright fa-fw" aria-hidden=true></i><span itemprop=copyrightYear>2023</span><span class=author itemprop=copyrightHolder>&nbsp;<a href=https://github.com/wangzhe3224 target=_blank>FunCoder</a></span></div></div></footer></div><div id=fixed-buttons><a href=# id=back-to-top class=fixed-button title="Back to Top"><i class="fas fa-arrow-up fa-fw" aria-hidden=true></i>
</a><a href=# id=view-comments class=fixed-button title="View Comments"><i class="fas fa-comment fa-fw" aria-hidden=true></i></a></div><link rel=stylesheet href=https://cdn.jsdelivr.net/npm/lightgallery@2.5.0/css/lightgallery-bundle.min.css><script type=text/javascript src=https://QuantBox.disqus.com/embed.js defer></script><script type=text/javascript src=https://cdn.jsdelivr.net/npm/autocomplete.js@0.38.1/dist/autocomplete.min.js></script><script type=text/javascript src=https://cdn.jsdelivr.net/npm/lunr@2.3.9/lunr.min.js></script><script type=text/javascript src=https://cdn.jsdelivr.net/npm/lazysizes@5.3.2/lazysizes.min.js></script><script type=text/javascript src=https://cdn.jsdelivr.net/npm/lightgallery@2.5.0/lightgallery.min.js></script><script type=text/javascript src=https://cdn.jsdelivr.net/npm/lightgallery@2.5.0/plugins/thumbnail/lg-thumbnail.min.js></script><script type=text/javascript src=https://cdn.jsdelivr.net/npm/lightgallery@2.5.0/plugins/zoom/lg-zoom.min.js></script><script type=text/javascript src=https://cdn.jsdelivr.net/npm/clipboard@2.0.11/dist/clipboard.min.js></script><script type=text/javascript src=https://cdn.jsdelivr.net/npm/sharer.js@0.5.1/sharer.min.js></script><script type=text/javascript>window.config={code:{copyTitle:"Copy to clipboard",maxShownLines:50},comment:{},lightgallery:!0,search:{highlightTag:"em",lunrIndexURL:"/index.json",maxResultLength:10,noResultsFound:"No results found",snippetLength:30,type:"lunr"}}</script><script type=text/javascript src=/js/theme.min.js></script><script type=text/javascript>window.dataLayer=window.dataLayer||[];function gtag(){dataLayer.push(arguments)}gtag("js",new Date),gtag("config","G-9229ZLLPT3",{anonymize_ip:!0})</script><script type=text/javascript src="https://www.googletagmanager.com/gtag/js?id=G-9229ZLLPT3" async></script><script async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js?client=ca-pub-9801985319378542" crossorigin=anonymous></script></body></html>